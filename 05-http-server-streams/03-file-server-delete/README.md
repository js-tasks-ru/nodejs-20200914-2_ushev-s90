# Файловый сервер - удаление файла (Решение)

Для удаления файла используем функцию `unlink` модуля `fs`. В качестве аргумента она принимает путь
до файла и возвращает либо объект с ошибкой (если что-то пошло не так), либо ничего. Из ошибок как и
в прошлом случае нам особенно интересна лишь одна, которая сообщит нам если файла с таким именем на
диске нет (ее код - `ENOENT`). Все остальные ошибки обработаем стандартным способом, отправив 
пользователю статус `500`. Если ошибок не было - значит файл успешно удален.
```js
fs.unlink(filepath, (error) => {
  if (error) {
    if (error.code === 'ENOENT') {
      res.statusCode = 404;
      res.end('Not found');
    } else {
      res.statusCode = 500;
      res.end('Internal error');
    }
  } else {
    res.statusCode = 200;
    res.end('Ok');
  }
});
``` 


Проверку вложенных папок можно выполнить просто проверкой наличия слешей или точек в ссылке запроса:
```js
if (pathname.includes('/') || pathname.includes('..')) {
  res.statusCode = 400;
  res.end('Nested paths are not allowed');
}
```
